<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-node docs-doc-id-tutorials/upgrades/multichain">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Multichain | Tenet Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://tenet-org.github.io/tenet-docs/node/tutorials/upgrades/multichain"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-node-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-node-current"><meta data-rh="true" property="og:title" content="Multichain | Tenet Docs"><meta data-rh="true" name="description" content="This document describes the steps for validators and full node operators, to upgrade successfully to the v11.2.0 release."><meta data-rh="true" property="og:description" content="This document describes the steps for validators and full node operators, to upgrade successfully to the v11.2.0 release."><link data-rh="true" rel="icon" href="/tenet-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tenet-org.github.io/tenet-docs/node/tutorials/upgrades/multichain"><link data-rh="true" rel="alternate" href="https://tenet-org.github.io/tenet-docs/node/tutorials/upgrades/multichain" hreflang="en"><link data-rh="true" rel="alternate" href="https://tenet-org.github.io/tenet-docs/node/tutorials/upgrades/multichain" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/tenet-docs/assets/css/styles.005dbeab.css">
<link rel="preload" href="/tenet-docs/assets/js/runtime~main.c5f7b9fe.js" as="script">
<link rel="preload" href="/tenet-docs/assets/js/main.f23874c6.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/tenet-docs/"><div class="navbar__logo"><img src="/tenet-docs/img/tenet.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/tenet-docs/img/tenet.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Tenet Documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/tenet-docs/node">Node</a><a class="navbar__item navbar__link" href="/tenet-docs/tLSD">tLSD</a><a class="navbar__item navbar__link" href="/tenet-docs/diversified-pos">Diversified POS</a><a class="navbar__item navbar__link" href="/tenet-docs/tenet-stablecoin-protocol">Stablecoin</a><a class="navbar__item navbar__link" href="/tenet-docs/tokenomics">Tokenomics</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tenet-org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tenet-docs/node/">Resources</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/tenet-docs/node/category/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tenet-docs/node/tutorials/running-node">Running mainnet node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tenet-docs/node/tutorials/running-node-ansible">Running mainnet node with ansible</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tenet-docs/node/tutorials/metamask-keplr">Connect to MetaMask and Keplr</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tenet-docs/node/tutorials/deploy-contract">Deploy contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tenet-docs/node/tutorials/contracts-verification">Verify contracts on tenetscan</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/tenet-docs/node/category/upgrades">Upgrades</a><button aria-label="Toggle the collapsible sidebar category &#x27;Upgrades&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tenet-docs/node/tutorials/upgrades/multichain">Multichain</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tenet-docs/node/tutorials/cli">Interacting with Tenetd (CLI)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/tenet-docs/node/category/precompiles">Precompiles</a><button aria-label="Toggle the collapsible sidebar category &#x27;Precompiles&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/tenet-docs/node/category/api">API</a><button aria-label="Toggle the collapsible sidebar category &#x27;API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/tenet-docs/node/category/validation">Validation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Validation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/tenet-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/tenet-docs/node/category/tutorials"><span itemprop="name">Tutorials</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/tenet-docs/node/category/upgrades"><span itemprop="name">Upgrades</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Multichain</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Multichain</h1><p>This document describes the steps for validators and full node operators, to upgrade successfully to the v11.2.0 release.
The v11.2.0 upgrade is a mandatory release.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instructions">Instructions<a href="#instructions" class="hash-link" aria-label="Direct link to Instructions" title="Direct link to Instructions">​</a></h2><ul><li><a href="#on-chain-governance-proposal-attains-consensus">On-chain governance proposal attains consensus</a></li><li><a href="#upgrade-date">Upgrade date</a></li><li><a href="#chain-id-will-remain-the-same">Chain-id will remain the same</a></li><li><a href="#preparing-for-the-upgrade">Preparing for the upgrade</a><ul><li><a href="#system-requirement">System requirement</a></li><li><a href="#backups">Backups</a></li><li><a href="#testing">Testing</a></li><li><a href="#current-runtime-tenet_155-1-pre-multichain-upgrade-is-running-tenet">Current runtime, tenet_155-1 (pre-multichain upgrade) is running Tenet v11.0.7</a></li><li><a href="#target-runtime-tenet_155-1-post-multichain-upgrade-will-run-tenet">Target runtime, tenet_155-1 (post-multichain upgrade) will run Tenet v11.2.0</a></li></ul></li><li><a href="#upgrade-steps">Upgrade steps</a><ul><li><a href="#method-i-manual-upgrade">Method I: Manual Upgrade</a></li><li><a href="#method-ii-upgrade-using-cosmovisor">Method II: Upgrade using Cosmovisor</a><ul><li><a href="#manually-preparing-the-binary">Manually preparing the binary</a><ul><li><a href="#preparation">Preparation</a></li><li><a href="#expected-upgrade-result">Expected upgrade result</a></li></ul></li><li><a href="#auto-downloading-the-tenet-binary">Auto-Downloading the Tenet binary</a><ul><li><a href="#preparation-1">Preparation</a></li><li><a href="#expected-result">Expected result</a></li></ul></li></ul></li></ul></li><li><a href="#upgrade-duration">Upgrade duration</a></li><li><a href="#rollback-plan">Rollback plan</a></li><li><a href="#communications">Communications</a></li><li><a href="#risks">Risks</a></li><li><a href="#reference">Reference</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="on-chain-governance-proposal-attains-consensus">On-chain governance proposal attains consensus<a href="#on-chain-governance-proposal-attains-consensus" class="hash-link" aria-label="Direct link to On-chain governance proposal attains consensus" title="Direct link to On-chain governance proposal attains consensus">​</a></h2><p><a href="https://tenet.explorers.guru/proposal/2" target="_blank" rel="noopener noreferrer">https://tenet.explorers.guru/proposal/2</a> is the reference on-chain governance proposal for this upgrade. Neither core developers nor core funding entities control the governance, and this governance proposal has passed in a <em>fully decentralized</em> way.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-date">Upgrade date<a href="#upgrade-date" class="hash-link" aria-label="Direct link to Upgrade date" title="Direct link to Upgrade date">​</a></h2><p>The upgrade will take place at a block height of <code>2 330 000</code>. The date/time of the upgrade is subject to change as blocks are not generated at a constant interval. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="chain-id-will-remain-the-same">Chain-id will remain the same<a href="#chain-id-will-remain-the-same" class="hash-link" aria-label="Direct link to Chain-id will remain the same" title="Direct link to Chain-id will remain the same">​</a></h2><p>The chain-id of the network will remain the same, <code>tenet_155-1</code>. This is because an in-place migration of state will take place, i.e., this upgrade does not export any state.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparing-for-the-upgrade">Preparing for the upgrade<a href="#preparing-for-the-upgrade" class="hash-link" aria-label="Direct link to Preparing for the upgrade" title="Direct link to Preparing for the upgrade">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="system-requirement">System requirement<a href="#system-requirement" class="hash-link" aria-label="Direct link to System requirement" title="Direct link to System requirement">​</a></h3><p>32GB RAM is recommended to ensure a smooth upgrade.</p><p>If you have less than 32GB RAM, you might try creating a swapfile to swap an idle program onto the hard disk to free up memory. This can
allow your machine to run the binary than it could run in RAM alone.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> fallocate </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> 16G /swapfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">600</span><span class="token plain"> /swapfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkswap</span><span class="token plain"> /swapfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">swapon</span><span class="token plain"> /swapfile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backups">Backups<a href="#backups" class="hash-link" aria-label="Direct link to Backups" title="Direct link to Backups">​</a></h3><p>Prior to the upgrade, validators are encouraged to take a full data snapshot. Snapshotting depends heavily on infrastructure, but generally this can be done by backing up the <code>.tenetd</code> directory.
If you use Cosmovisor to upgrade, by default, Cosmovisor will backup your data upon upgrade. See below <a href="#method-ii-upgrade-using-cosmovisor-by-manually-preparing-the-tenet-v700-binary">upgrade by cosmovisor</a> section.</p><p>It is critically important for validator operators to back-up the <code>.tenetd/data/priv_validator_state.json</code> file after stopping the tenetd process. This file is updated every block as your validator participates in consensus rounds. It is a critical file needed to prevent double-signing, in case the upgrade fails and the previous chain needs to be restarted.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing">Testing<a href="#testing" class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing">​</a></h3><p>For those validator and full node operators that are interested in ensuring preparedness for the impending upgrade, you can run a Local Testnet or join in our Tenet Public Testnet.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="current-runtime-tenet_155-1-pre-multichain-upgrade-is-running-tenet-v1107">Current runtime, tenet_155-1 (pre-multichain upgrade) is running Tenet v11.0.7<a href="#current-runtime-tenet_155-1-pre-multichain-upgrade-is-running-tenet-v1107" class="hash-link" aria-label="Direct link to Current runtime, tenet_155-1 (pre-multichain upgrade) is running Tenet v11.0.7" title="Direct link to Current runtime, tenet_155-1 (pre-multichain upgrade) is running Tenet v11.0.7">​</a></h3><p>The Cosmos Hub mainnet network, <code>tenet_155-1</code>, is currently running Tenet v11.0.7. We anticipate that operators who are running on v11.0.7, will be able to upgrade successfully. Validators are expected to ensure that their systems are up to date and capable of performing the upgrade. This includes running the correct binary, or if building from source, building with go <code>1.20</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="target-runtime-tenet_155-1-post-multichain-upgrade-will-run-tenet-v1120">Target runtime, tenet_155-1 (post-multichain upgrade) will run Tenet v11.2.0<a href="#target-runtime-tenet_155-1-post-multichain-upgrade-will-run-tenet-v1120" class="hash-link" aria-label="Direct link to Target runtime, tenet_155-1 (post-multichain upgrade) will run Tenet v11.2.0" title="Direct link to Target runtime, tenet_155-1 (post-multichain upgrade) will run Tenet v11.2.0">​</a></h3><p>The Cosmos Hub mainnet network, <code>tenet_155-1</code>, will run Tenet v11.2.0. Operators <em>MUST</em> use this version post-upgrade to remain connected to the network.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-steps">Upgrade steps<a href="#upgrade-steps" class="hash-link" aria-label="Direct link to Upgrade steps" title="Direct link to Upgrade steps">​</a></h2><p>There are 2 major ways to upgrade a node:</p><ul><li>Manual upgrade</li><li>Upgrade using <a href="https://github.com/cosmos/cosmos-sdk/tree/master/cosmovisor" target="_blank" rel="noopener noreferrer">Cosmovisor</a><ul><li>Either by manually preparing the new binary</li><li>Or by using the auto-download functionality (this is not yet recommended)</li></ul></li></ul><p>If you prefer to use Cosmovisor to upgrade, some preparation work is needed before upgrade.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-i-manual-upgrade">Method I: Manual Upgrade<a href="#method-i-manual-upgrade" class="hash-link" aria-label="Direct link to Method I: Manual Upgrade" title="Direct link to Method I: Manual Upgrade">​</a></h3><p>Make sure Tenet v11.2.0 is installed by either downloading a <a href="https://github.com/cosmos/tenet/releases/tag/v11.2.0" target="_blank" rel="noopener noreferrer">compatible binary</a>, or building from source. Building from source requires <strong>Golang 1.20</strong>.</p><p>Run Tenet v11.0.7 till upgrade height, the node will panic:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERR UPGRADE </span><span class="token string" style="color:#e3116c">&quot;multichain&quot;</span><span class="token plain"> NEEDED at height: </span><span class="token number" style="color:#36acaa">2330000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Stop the node, and switch the binary to Tenet v11.2.0 and re-start by <code>tenetd start</code>.</p><p>It may take several minutes to a few hours until validators with a total sum voting power &gt; 2/3 to complete their node upgrades. After that, the chain can continue to produce blocks.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-ii-upgrade-using-cosmovisor">Method II: Upgrade using Cosmovisor<a href="#method-ii-upgrade-using-cosmovisor" class="hash-link" aria-label="Direct link to Method II: Upgrade using Cosmovisor" title="Direct link to Method II: Upgrade using Cosmovisor">​</a></h3><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p><strong>Please Read Before Proceeding</strong>
Using Cosmovisor 1.2.0 and higher requires a lowercase naming convention for upgrade version directory. For Cosmovisor 1.1.0 and earlier, the upgrade version is not lowercased.</p></div></div><blockquote><p><strong>For Example:</strong>
<strong>Cosmovisor =&lt; <code>1.1.0</code>: <code>/upgrades/v9-Lambda/bin/tenetd</code></strong>
<strong>Cosmovisor &gt;= <code>1.2.0</code>: <code>/upgrades/v9-lambda/bin/tenetd</code></strong></p></blockquote><table><thead><tr><th>Cosmovisor Version</th><th>Binary Name in Path</th></tr></thead><tbody><tr><td>1.3</td><td>multichain</td></tr><tr><td>1.2</td><td>multichain</td></tr><tr><td>1.1</td><td>multichain</td></tr><tr><td>1.0</td><td>multichain</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="manually-preparing-the-binary">Manually preparing the binary<a href="#manually-preparing-the-binary" class="hash-link" aria-label="Direct link to Manually preparing the binary" title="Direct link to Manually preparing the binary">​</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="preparation">Preparation<a href="#preparation" class="hash-link" aria-label="Direct link to Preparation" title="Direct link to Preparation">​</a></h5><p>Install the latest version of Cosmovisor (<code>1.3.0</code>):</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> github.com/cosmos/cosmos-sdk/cosmovisor/cmd/cosmovisor@latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Verify Cosmovisor Version</strong></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cosmovisor version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cosmovisor version: v1.3.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a cosmovisor folder:</p><p>create a Cosmovisor folder inside <code>$TENET_HOME</code> and move Tenet v11.0.7 into <code>$TENET_HOME/cosmovisor/genesis/bin</code></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$TENET_HOME</span><span class="token plain">/cosmovisor/genesis/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">which</span><span class="token variable" style="color:#36acaa"> tenetd</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$TENET_HOME</span><span class="token plain">/cosmovisor/genesis/bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>build Tenet v11.2.0, and move tenetd v11.2.0 to <code>$TENET_HOME/cosmovisor/upgrades/multichain/bin</code></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain">  </span><span class="token variable" style="color:#36acaa">$TENET_HOME</span><span class="token plain">/cosmovisor/upgrades/multichain/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">which</span><span class="token variable" style="color:#36acaa"> tenetd</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$TENET_HOME</span><span class="token plain">/cosmovisor/upgrades/multichain/bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then you should get the following structure:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── current -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> genesis or upgrades/</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── genesis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── tenetd  </span><span class="token comment" style="color:#999988;font-style:italic">#v11.0.7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── upgrades</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── multichain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └── bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            └── tenetd  </span><span class="token comment" style="color:#999988;font-style:italic">#v11.2.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Export the environmental variables:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DAEMON_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tenetd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># please change to your own tenet home dir</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># please note `DAEMON_HOME` has to be absolute path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DAEMON_HOME</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$TENET_HOME</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DAEMON_RESTART_AFTER_UPGRADE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Start the node:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cosmovisor run start --x-crisis-skip-assert-invariants </span><span class="token parameter variable" style="color:#36acaa">--home</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$DAEMON_HOME</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Skipping the invariant checks is strongly encouraged since it decreases the upgrade time significantly and since there are some other improvements coming to the crisis module in the next release of the Cosmos SDK.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="expected-upgrade-result">Expected upgrade result<a href="#expected-upgrade-result" class="hash-link" aria-label="Direct link to Expected upgrade result" title="Direct link to Expected upgrade result">​</a></h4><p>When the upgrade block height is reached, Tenet will panic and stop:</p><p>This may take 7 minutes to a few hours.
After upgrade, the chain will continue to produce blocks when validators with a total sum voting power &gt; 2/3 complete their node upgrades.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="auto-downloading-the-tenet-binary">Auto-Downloading the Tenet binary<a href="#auto-downloading-the-tenet-binary" class="hash-link" aria-label="Direct link to Auto-Downloading the Tenet binary" title="Direct link to Auto-Downloading the Tenet binary">​</a></h3><p><strong>This method is not recommended!</strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="preparation-1">Preparation<a href="#preparation-1" class="hash-link" aria-label="Direct link to Preparation" title="Direct link to Preparation">​</a></h4><p>Install the latest version of Cosmovisor (<code>1.3.0</code>):</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> github.com/cosmos/cosmos-sdk/cosmovisor/cmd/cosmovisor@latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a cosmovisor folder:</p><p>create a cosmovisor folder inside tenet home and move tenetd v11.0.7 into <code>$TENET_HOME/cosmovisor/genesis/bin</code></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$TENET_HOME</span><span class="token plain">/cosmovisor/genesis/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">which</span><span class="token variable" style="color:#36acaa"> tenetd</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$TENET_HOME</span><span class="token plain">/cosmovisor/genesis/bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── current -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> genesis or upgrades/</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── genesis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     └── bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └── tenetd  </span><span class="token comment" style="color:#999988;font-style:italic">#v11.0.7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Export the environmental variables:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DAEMON_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tenetd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># please change to your own tenet home dir</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DAEMON_HOME</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$TENET_HOME</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DAEMON_RESTART_AFTER_UPGRADE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DAEMON_ALLOW_DOWNLOAD_BINARIES</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Start the node:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cosmovisor run start --x-crisis-skip-assert-invariants </span><span class="token parameter variable" style="color:#36acaa">--home</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$DAEMON_HOME</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Skipping the invariant checks can help decrease the upgrade time significantly.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="expected-result">Expected result<a href="#expected-result" class="hash-link" aria-label="Direct link to Expected result" title="Direct link to Expected result">​</a></h4><p>When the upgrade block height is reached, you can find the following information in the log:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERR UPGRADE </span><span class="token string" style="color:#e3116c">&quot;multichain&quot;</span><span class="token plain"> NEEDED at height: </span><span class="token number" style="color:#36acaa">2330000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then the Cosmovisor will create <code>$TENET_HOME/cosmovisor/upgrades/multichain/bin</code> and download the Tenet v11.2.0 binary to this folder according to links in the <code>--info</code> field of the upgrade proposal.
This may take 7 minutes to a few hours, afterwards, the chain will continue to produce blocks once validators with a total sum voting power &gt; 2/3 complete their nodes upgrades.</p><p><em>Please Note:</em></p><ul><li>In general, auto-download comes with the risk that the verification of correct download is done automatically. If users want to have the highest guarantee users should confirm the check-sum manually. We hope more node operators will use the auto-download for this release but please be aware this is a risk and users should take at your own discretion.</li><li>Users should run their node on v11.0.7 if they use the cosmovisor v1.3.0 with auto-download enabled for upgrade process.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-duration">Upgrade duration<a href="#upgrade-duration" class="hash-link" aria-label="Direct link to Upgrade duration" title="Direct link to Upgrade duration">​</a></h2><p>The upgrade may take a few minutes to several hours to complete because tenet_155-1 participants operate globally with differing operating hours and it may take some time for operators to upgrade their binaries and connect to the network.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rollback-plan">Rollback plan<a href="#rollback-plan" class="hash-link" aria-label="Direct link to Rollback plan" title="Direct link to Rollback plan">​</a></h2><p>During the network upgrade, core Tenet teams will be keeping an ever vigilant eye and communicating with operators on the status of their upgrades. During this time, the core teams will listen to operator needs to determine if the upgrade is experiencing unintended challenges. In the event of unexpected challenges, the core teams, after conferring with operators and attaining social consensus, may choose to declare that the upgrade will be skipped.</p><p>Steps to skip this upgrade proposal are simply to resume the tenet_155-1 network with the (downgraded) v11.0.7 binary using the following command:</p><blockquote><p>tenetd start --unsafe-skip-upgrade 2330000</p></blockquote><p>Note: There is no particular need to restore a state snapshot prior to the upgrade height, unless specifically directed by core Tenet teams.</p><p>Important: A social consensus decision to skip the upgrade will be based solely on technical merits, thereby respecting and maintaining the decentralized governance process of the upgrade proposal&#x27;s successful YES vote.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="communications">Communications<a href="#communications" class="hash-link" aria-label="Direct link to Communications" title="Direct link to Communications">​</a></h2><p>Operators are encouraged to join the <code>#cosmos-hub-validators-verified</code> channel of the Cosmos Hub Community Discord. This channel is the primary communication tool for operators to ask questions, report upgrade status, report technical issues, and to build social consensus should the need arise. This channel is restricted to known operators and requires verification beforehand. Requests to join the <code>#cosmos-hub-validators-verified</code> channel can be sent to the <code>#general-support</code> channel.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="risks">Risks<a href="#risks" class="hash-link" aria-label="Direct link to Risks" title="Direct link to Risks">​</a></h2><p>As a validator performing the upgrade procedure on your consensus nodes carries a heightened risk of double-signing and being slashed. The most important piece of this procedure is verifying your software version and genesis file hash before starting your validator and signing.</p><p>The riskiest thing a validator can do is discover that they made a mistake and repeat the upgrade procedure again during the network startup. If you discover a mistake in the process, the best thing to do is wait for the network to start before correcting it.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/tenet-org/tenet-docs/edit/master/docs/node/tutorials/upgrades/multichain.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/tenet-docs/node/category/upgrades"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Upgrades</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tenet-docs/node/tutorials/cli"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Interacting with Tenetd (CLI)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#instructions" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#on-chain-governance-proposal-attains-consensus" class="table-of-contents__link toc-highlight">On-chain governance proposal attains consensus</a></li><li><a href="#upgrade-date" class="table-of-contents__link toc-highlight">Upgrade date</a></li><li><a href="#chain-id-will-remain-the-same" class="table-of-contents__link toc-highlight">Chain-id will remain the same</a></li><li><a href="#preparing-for-the-upgrade" class="table-of-contents__link toc-highlight">Preparing for the upgrade</a><ul><li><a href="#system-requirement" class="table-of-contents__link toc-highlight">System requirement</a></li><li><a href="#backups" class="table-of-contents__link toc-highlight">Backups</a></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a></li><li><a href="#current-runtime-tenet_155-1-pre-multichain-upgrade-is-running-tenet-v1107" class="table-of-contents__link toc-highlight">Current runtime, tenet_155-1 (pre-multichain upgrade) is running Tenet v11.0.7</a></li><li><a href="#target-runtime-tenet_155-1-post-multichain-upgrade-will-run-tenet-v1120" class="table-of-contents__link toc-highlight">Target runtime, tenet_155-1 (post-multichain upgrade) will run Tenet v11.2.0</a></li></ul></li><li><a href="#upgrade-steps" class="table-of-contents__link toc-highlight">Upgrade steps</a><ul><li><a href="#method-i-manual-upgrade" class="table-of-contents__link toc-highlight">Method I: Manual Upgrade</a></li><li><a href="#method-ii-upgrade-using-cosmovisor" class="table-of-contents__link toc-highlight">Method II: Upgrade using Cosmovisor</a></li><li><a href="#manually-preparing-the-binary" class="table-of-contents__link toc-highlight">Manually preparing the binary</a></li><li><a href="#auto-downloading-the-tenet-binary" class="table-of-contents__link toc-highlight">Auto-Downloading the Tenet binary</a></li></ul></li><li><a href="#upgrade-duration" class="table-of-contents__link toc-highlight">Upgrade duration</a></li><li><a href="#rollback-plan" class="table-of-contents__link toc-highlight">Rollback plan</a></li><li><a href="#communications" class="table-of-contents__link toc-highlight">Communications</a></li><li><a href="#risks" class="table-of-contents__link toc-highlight">Risks</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023. <a href="https://tenet.org">Tenet Protocol</a>.</div></div></div></footer></div>
<script src="/tenet-docs/assets/js/runtime~main.c5f7b9fe.js"></script>
<script src="/tenet-docs/assets/js/main.f23874c6.js"></script>
</body>
</html>