"use strict";(self.webpackChunktenet_docs=self.webpackChunktenet_docs||[]).push([[1834],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=d(a),m=r,h=p["".concat(s,".").concat(m)]||p[m]||u[m]||o;return a?n.createElement(h,i(i({ref:t},c),{},{components:a})):n.createElement(h,i({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var d=2;d<o;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},9955:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const o={sidebar_position:3},i="Aggregator Protocol",l={unversionedId:"aggregator",id:"aggregator",title:"Aggregator Protocol",description:"The Tenet blockchain uniquely accommodates multiple Liquid Staking Derivatives (LSDs), leading to various Tenet-specific Liquid Staking Derivatives (tLSDs) backed by identical LSDs. This ecosystem, although powerful, can be complex for DeFi integrations. The Tenet Aggregator Protocol elegantly solves this problem by offering a unified, dual-yield-bearing tLSD token, simplifying the experience for end-users and enabling seamless integration into existing DeFi projects.",source:"@site/docs/tLSD/aggregator.md",sourceDirName:".",slug:"/aggregator",permalink:"/tLSD/aggregator",draft:!1,editUrl:"https://github.com/tenet-org/tenet-docs/edit/master/docs/tLSD/aggregator.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docsSidebar",previous:{title:"ITLSDMasterFactory Interface",permalink:"/tLSD/interface"}},s={},d=[{value:"Main Aggregator Contract",id:"main-aggregator-contract",level:2},{value:"Deposit/Mint Process",id:"depositmint-process",level:3},{value:"Specific Validator Allocation:",id:"specific-validator-allocation",level:4},{value:"Automatic Distribution to Top Validators:",id:"automatic-distribution-to-top-validators",level:4},{value:"Withdrawal Process and Validator Protection",id:"withdrawal-process-and-validator-protection",level:3},{value:"Interface",id:"interface",level:3},{value:"Aggregator Staking Contract",id:"aggregator-staking-contract",level:2},{value:"Interface",id:"interface-1",level:3},{value:"Wrapper Contract",id:"wrapper-contract",level:2},{value:"Fee Structure",id:"fee-structure",level:3},{value:"Interface",id:"interface-2",level:3},{value:"How to Obtain wTLSD: A Step-by-Step Guide",id:"how-to-obtain-wtlsd-a-step-by-step-guide",level:2}],c={toc:d},p="wrapper";function u(e){let{components:t,...a}=e;return(0,r.kt)(p,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"aggregator-protocol"},"Aggregator Protocol"),(0,r.kt)("p",null,"The Tenet blockchain uniquely accommodates multiple Liquid Staking Derivatives (LSDs), leading to various Tenet-specific Liquid Staking Derivatives (tLSDs) backed by identical LSDs. This ecosystem, although powerful, can be complex for DeFi integrations. The Tenet Aggregator Protocol elegantly solves this problem by offering a unified, dual-yield-bearing tLSD token, simplifying the experience for end-users and enabling seamless integration into existing DeFi projects."),(0,r.kt)("h1",{id:"core-components-of-the-tenet-aggregator-protocol"},"Core Components of the Tenet Aggregator Protocol"),(0,r.kt)("h2",{id:"main-aggregator-contract"},"Main Aggregator Contract"),(0,r.kt)("p",null,"The aggregator contract accepts LSD tokens and delegates them across supported validators on the network. It issues a tLSD token, which is a tokenized representation of an LSD asset staked to various validators on the Tenet blockchain. Tenet staking yield accumulates in the contract, is sent to the staking contract, and distributed to all staked tLSD holders."),(0,r.kt)("p",null,"On the withdrawal side, the aggregator contract accepts tLSD tokens and burns them, undelegating the underlying LSD and sending it back to the user after the unbonding period is finished."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"LSD Acceptance"),": The contract accepts LSD tokens from users and delegates them to a pool of 64 eligible validators."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Validator Delegation"),": It autonomously allocates the received LSDs across these validators."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"tLSD Issuance"),": Users are issued tLSD tokens, representing their stakes distributed across all participating validators."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Yield Distribution"),": Yield from each validator is aggregated and uniformly distributed to all staked tLSD holders via the associated staking contract.")),(0,r.kt)("h3",{id:"depositmint-process"},"Deposit/Mint Process"),(0,r.kt)("p",null,"The Main Aggregator Contract facilitates two distinct methods for depositing or minting, differentiated by how they allocate assets to validators:"),(0,r.kt)("h4",{id:"specific-validator-allocation"},"Specific Validator Allocation:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"When depositing or minting, users have the option to specify a validator's address."),(0,r.kt)("li",{parentName:"ul"},"If a validator address is provided, the contract allocates all the deposited or minted assets to the specified validator. This approach allows users or front-end interfaces to support a preferred validator or to let their users choose one."),(0,r.kt)("li",{parentName:"ul"},"This method results in a portfolio that is more heavily weighted towards the chosen validator.")),(0,r.kt)("h4",{id:"automatic-distribution-to-top-validators"},"Automatic Distribution to Top Validators:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If no validator address is specified, the contract employs an automatic distribution mechanism."),(0,r.kt)("li",{parentName:"ul"},"Assets are proportionally delegated to a top set of validators based on each validator's share in the total delegation."),(0,r.kt)("li",{parentName:"ul"},"This method ensures a balanced allocation of assets across the leading validators in the protocol.")),(0,r.kt)("h3",{id:"withdrawal-process-and-validator-protection"},"Withdrawal Process and Validator Protection"),(0,r.kt)("p",null,"The withdrawal process from the Main Aggregator Contract is carefully designed to ensure equitable distribution and to protect the network validators. Here\u2019s an overview:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Top Set Validator Selection"),": The contract selects a top set of validators for withdrawals, based on their stake in the protocol."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Proportional Undelegation"),": The total staked assets across these validators are calculated. Withdrawals are then proportionally undelegated based on each validator's share in the total delegation.")),(0,r.kt)("p",null,"An essential feature of the withdrawal process is the protection against draining a single validator excessively:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Withdrawal Cap"),": The contract imposes a cap on the amount that can be withdrawn from a single validator in one transaction. This cap is set at 10% of the total assets staked with that validator."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Dynamic Withdrawal Limit"),": The ",(0,r.kt)("inlineCode",{parentName:"li"},"maxWithdraw")," view function provides information on the maximum amount that can be withdrawn in a single transaction. This limit ensures that no single validator is disproportionately affected by withdrawal requests."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Subsequent Transactions"),": If the 10% cap is reached in a withdrawal transaction, the affected validator is likely to not be among the top set of validators for subsequent withdrawals. This mechanism helps in balancing the delegation and prevents overburdening any single validator.")),(0,r.kt)("h3",{id:"interface"},"Interface"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"deposit"),": Mints tLSD to the receiver by depositing an exact amount of LSD tokens."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"withdraw"),": Burns tLSD from the owner and sends an exact amount of underlying LSD to the receiver."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mint"),": Mints an exact amount of tLSD to the receiver."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"redeem"),": Burns an exact amount of tLSD from the owner and sends LSD tokens to the receiver."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"claimVeTenetRewards"),": Claims validator rewards and redirects them to the staking contract."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"totalAssets"),": Returns the total amount of LSD tokens managed by the aggregator contract."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"convertToShares"),": Returns the amount of tLSD that the contract would exchange for the amount of LSD provided"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"convertToAssets"),": Returns the amount of LSD that the contract would exchange for the amount of tLSD provided"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"MaxDeposit"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"MaxWithdraw"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"MaxMint"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"MaxRedeem"),": Returns the maximum permissible transaction amounts.")),(0,r.kt)("h2",{id:"aggregator-staking-contract"},"Aggregator Staking Contract"),(0,r.kt)("p",null,"The AggregatedTLSDStaking smart contract allows users to stake their tLSD tokens in order to earn their delegation rewards over time. The contract accumulates yield from the main aggregator contract and distributes it to staked users in the form of wTENET."),(0,r.kt)("h3",{id:"interface-1"},"Interface"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"stake"),": Stake a specific amount of tLSD tokens."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"withdraw"),": Withdraw a specific amount of tLSD tokens."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"claim"),": Claim the rewards earned."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"exit"),": Shortcut to withdraw all staked tLSD tokens and claim all rewards."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"earned"),": Returns the amount of rewards earned by a specific account."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"stakeOf"),": Returns the amount of tLSD tokens staked by a specific account."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"totalSupply"),": Returns the total amount of tLSD tokens staked in the contract.")),(0,r.kt)("h2",{id:"wrapper-contract"},"Wrapper Contract"),(0,r.kt)("p",null,"The wrapper contract is designed to simplify the user experience by automating the staking of tLSD tokens and yield compounding. Upon depositing tLSD tokens into the wrapper contract, users receive a yield-bearing token in return. The contract then automatically stakes these tLSD tokens and claims the generated yield on behalf of the user. Subsequently, this yield is reinvested to leverage the benefits of compound interest."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Deposit tLSD"),": Once you deposit tLSD, the wrapper contract stakes them for you."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Receive wTLSD"),": In return, you receive wTLSD tokens that are dual-yield-bearing and ready for DeFi.")),(0,r.kt)("h3",{id:"fee-structure"},"Fee Structure"),(0,r.kt)("p",null,"To support the ongoing development and maintenance of the platform, a performance fee is implemented. This fee amounts to 10% of the yield generated by the staked assets. It is deducted prior to the reinvestment of the yield, ensuring a transparent and fair distribution of returns. "),(0,r.kt)("p",null,"There are no deposit- or withdrawal-related fees."),(0,r.kt)("h3",{id:"interface-2"},"Interface"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"deposit"),": Mints wTLSD to the receiver by depositing an exact amount of tLSD tokens."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"withdraw"),": Burns wTLSD from the owner and sends an exact amount of underlying tLSD to the receiver."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mint"),": Mints an exact amount of wTLSD to the receiver."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"redeem"),": Burns an exact amount of wTLSD from the owner and sends tLSD tokens to the receiver."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"remainingProfitUnlockTime"),": Returns the remaining time until all profits from the last compound are unlocked."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"lockedProfit"),": Returns the amount of locked profit from the last compound."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"totalAssets"),": Returns the total amount of tLSD tokens managed by the aggregator contract."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"convertToShares"),": Returns the amount of wTLSD that the contract would exchange for the amount of tLSD provided"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"convertToAssets"),": Returns the amount of tLSD that the contract would exchange for the amount of wTLSD provided")),(0,r.kt)("h2",{id:"how-to-obtain-wtlsd-a-step-by-step-guide"},"How to Obtain wTLSD: A Step-by-Step Guide"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Transfer your LSD tokens to a compatible wallet (e.g., MetaMask, Eva)."),(0,r.kt)("li",{parentName:"ol"},"Ensure you have sufficient TENET tokens for transaction fees."),(0,r.kt)("li",{parentName:"ol"},"Visit <",(0,r.kt)("em",{parentName:"li"},"insert link"),"> and connect your wallet."),(0,r.kt)("li",{parentName:"ol"},"Bridge your LSD tokens to the Tenet blockchain. The bridge to process this is accessible at <",(0,r.kt)("em",{parentName:"li"},"insert link"),">."),(0,r.kt)("li",{parentName:"ol"},"Before proceeding, ensure that you are connected to the Tenet blockchain network."),(0,r.kt)("li",{parentName:"ol"},"You can now delegate and wrap your LSD tokens to receive wTLSD tokens. To do this, navigate to <",(0,r.kt)("em",{parentName:"li"},"insert link"),"> and use the 'delegate and wrap' function and confirm your transaction."),(0,r.kt)("li",{parentName:"ol"},"All of your LSD tokens are now staked on Tenet and earning rewards on top op the yield from the original chain. You can now use your wTLSD tokens in DeFi applications.")))}u.isMDXComponent=!0}}]);